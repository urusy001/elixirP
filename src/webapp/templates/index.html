{% extends "base.html" %}

{% block title %}ElixirPeptides{% endblock %}

{% block extra_css %}
{% endblock %}

{% block content %}
<!-- üîç Search overlay -->
<div class="search-overlay" id="search-overlay">
    <div class="search-header">
        <input type="text" id="search-input" placeholder="–ü–æ–∏—Å–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤..."/>
        <button id="close-search">‚úï</button>
    </div>
    <ul id="history-list"></ul>
</div>

<!-- Toolbar -->
<div class="toolbar" id="toolbar">
    <button class="toolbar-btn" id="sort-btn">–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞</button>
    <button class="toolbar-btn" id="filter-btn">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</button>
</div>

<!-- Root App container -->
<div id="app">
    <div id="tos-overlay" class="hidden">
        <div class="tos-modal">
            <div class="tos-header">
                <h2 class="tos-title">–ü—É–±–ª–∏—á–Ω–∞—è –æ—Ñ–µ—Ä—Ç–∞</h2>
            </div>

            <!-- –°–Æ–î–ê –±—É–¥–µ–º –ø–æ–¥–≥—Ä—É–∂–∞—Ç—å /static/offer.html -->
            <div id="tos-body" class="tos-body">
                –ó–∞–≥—Ä—É–∑–∫–∞ –æ—Ñ–µ—Ä—Ç—ã‚Ä¶
            </div>
        </div>
    </div>
    <div id="product-list" class="product-grid"></div>
    <div id="product-detail" style="display:none;"></div>
    <div class="profile-page" id="profile-page" style="display:none;">
        <div class="profile-header">
            <img src="" alt="profile-avatar" class="profile-avatar" id="profile-avatar">
            <div class="profile-name" id="profile-name">–ò–≤–∞–Ω –®–æ—Å—Ç–∞–∫–æ–≤</div>
        </div>

        <div class="profile-menu">
            <!-- –ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤ -->
            <button class="profile-item" id="orders-button" type="button">
                <div class="profile-item-left">
                    <div class="profile-icon">
                    <span class="profile-icon-inner">
                        <svg id="profile-icon-delivery-box"
                             xmlns="http://www.w3.org/2000/svg"
                             viewBox="0 0 48 48">
                            <defs>
                                <style>
                                    .st0 { fill: url(#linear-gradient); }
                                    .st1, .st2 { fill: #fff; }
                                    .st2 { stroke: #fff; stroke-miterlimit: 10; }
                                </style>
                                <linearGradient id="linear-gradient"
                                                x1="3.81" y1="24"
                                                x2="44.19" y2="24"
                                                gradientUnits="userSpaceOnUse">
                                    <stop offset="0" stop-color="#eec6b6"/>
                                    <stop offset=".5" stop-color="#e4b988"/>
                                    <stop offset=".54" stop-color="#e3b785"/>
                                    <stop offset="1" stop-color="#dea96e"/>
                                </linearGradient>
                            </defs>
                            <polygon class="st0"
                                     points="44.13 35.69 23.94 47.28 3.81 35.59 3.87 12.31 24.06 .72 44.19 12.41 44.13 35.69"/>
                            <path class="st1"
                                  d="M30.31,20.37c-6.71-4.06-13.41-8.11-20.12-12.17,1.98-.97,3.96-1.95,5.93-2.92,6.78,3.83,13.56,7.66,20.34,11.49-2.05,1.2-4.1,2.4-6.16,3.6Z"/>
                            <g>
                                <polygon class="st1"
                                         points="30.82 20.54 35.96 17.62 35.96 29.82 30.82 32.65 30.82 20.54"/>
                                <path class="st1"
                                      d="M35.46,18.48v11.04l-2.56,1.4-1.59.87v-10.97l4.15-2.35M36.46,16.77c-2.05,1.16-4.1,2.32-6.15,3.49v13.24c2.05-1.13,4.1-2.25,6.15-3.38v-13.35h0Z"/>
                            </g>
                            <path class="st2" d="M36.85,30.23"/>
                            <path class="st1" d="M57.19,46.91"/>
                        </svg>
                    </span>
                    </div>
                    <span class="profile-item-title">–ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤</span>
                </div>
            </button>

            <!-- –°–≤—è–∑–∞—Ç—å—Å—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π -->
            <button class="profile-item" id="support-button" type="button">
                <div class="profile-item-left">
                    <div class="profile-icon">
                    <span class="profile-icon-inner">
                        <svg id="profile-icon-support"
                             xmlns="http://www.w3.org/2000/svg"
                             viewBox="0 0 48 48">
                            <defs>
                                <style>
                                    .s0 { fill: url(#support-grad-main); }
                                    .s1 { fill: url(#support-grad-tail); }
                                    .s2 { fill: #ffffff; }
                                </style>
                                <linearGradient id="support-grad-main"
                                                x1="2.51" y1="18.46"
                                                x2="45.49" y2="18.46"
                                                gradientUnits="userSpaceOnUse">
                                    <stop offset="0" stop-color="#8fceea"/>
                                    <stop offset=".5" stop-color="#67bee1"/>
                                    <stop offset=".58" stop-color="#53b9dd"/>
                                    <stop offset=".87" stop-color="#17a9d3"/>
                                    <stop offset="1" stop-color="#00a4cf"/>
                                </linearGradient>
                                <linearGradient id="support-grad-tail"
                                                x1="2.5" y1="36.98"
                                                x2="28.64" y2="36.98"
                                                xlink:href="#support-grad-main"/>
                            </defs>
                            <path class="s0"
                                  d="M38.23,34.55c-3.47,0-6.94,0-10.42,0-6.02,0-12.03,0-18.05,0-.48,0-3.06-.05-5.14-2.13-.66-.66-1.19-1.44-1.56-2.31s-.57-1.82-.57-2.83V9.64c0-4.01,3.25-7.26,7.26-7.26h28.46c4.01,0,7.26,3.25,7.26,7.26v17.65c0,4.01-3.25,7.26-7.26,7.26Z"/>
                            <circle class="s2" cx="13.17" cy="18.46" r="3.31"/>
                            <circle class="s2" cx="24" cy="18.46" r="3.31"/>
                            <circle class="s2" cx="34.83" cy="18.46" r="3.31"/>
                            <path class="s1"
                                  d="M28.64,34.55c.02.1-11.38-1.11-18.61,5.26-3.76,3.31-4.83,7.24-6.18,6.83-.44-.13-1.25-.83-1.34-14.85-.01-1.9,0-3.47,0-4.51,0,0,.03.26.12.67,0,0,.18.9.44,1.61.39,1.09,2.05,2.48,2.72,2.88,3.69,2.23,22.83,1.98,22.85,2.1Z"/>
                        </svg>
                    </span>
                    </div>
                    <span class="profile-item-title">–°–≤—è–∑–∞—Ç—å—Å—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π</span>
                </div>
            </button>
        </div>
    </div>
    <div id="cart-page" style="display:none;">
        <div id="cart-summary">
            <p class="total-label" id="summary-label">
                <span class="total-label">–ò—Ç–æ–≥–æ:</span>
                <span class="total-amount">0 ‚ÇΩ</span>
            </p>
            <div class="promo">
                <label for="promo" style="display: none">–ü—Ä–æ–º–æ-–∫–æ–¥</label>
                <input type="text" id="promo" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ-–∫–æ–¥"/>
            </div>
        </div>
        <div id="cart-items"></div>
    </div>
    <div id="checkout-page" style="display:none;">

        <div id="delivery-header-container"></div>

        <div id="delivery-widget-container">
            <div id="cdek-map-container" class="delivery-widget"></div>
            <div id="yandex-map-container" class="delivery-widget"></div>
        </div>

        <div id="checkout-actions"></div>

    </div>
    <div id="contact-page" style="display:none;">
        <form id="contact-form" novalidate>
            <input type="text" name="name" placeholder="–ò–º—è" required/>
            <input type="text" name="surname" placeholder="–§–∞–º–∏–ª–∏—è" required/>
            <input type="tel" name="phone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω" required/>
            <input type="email" name="email" placeholder="Email" required/>

            <!-- Comment to order (moved from payment page) -->
            <div class="contact-commentary">
                <label class="contact-commentary-label" for="payment-commentary-input">
                    <textarea
                            id="payment-commentary-input"
                            name="commentary"
                            rows="2"
                            placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)"
                    ></textarea>
                </label>
            </div>
        </form>
    </div>

    <!-- Payment page is no longer used; keep empty container so JS/constants do not explode -->
    <div id="payment-page" style="display:none;"></div>
    <div id="process-payment-page" style="display: none;">
        <div class="process-card">
            <!-- Lottie animation container -->
            <h2 class="process-title">–ó–∞–∫–∞–∑ –æ—Ñ–æ—Ä–º–ª–µ–Ω üéâ</h2>
            <p class="process-text">–ú—ã –ø–æ–ª—É—á–∏–ª–∏ –≤–∞—à –∑–∞–∫–∞–∑ –∏ —Å–∫–æ—Ä–æ —Å –≤–∞–º–∏ —Å–≤—è–∂–µ–º—Å—è –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∏ –æ–ø–ª–∞—Ç—ã. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –Ω–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞</p>
            <div id="order-lottie" class="process-lottie"></div>
        </div>
    </div>

    <div id="orders-page" style="display:none;">
        <div class="orders-page">
            <!-- –ê–∫—Ç–∏–≤–Ω—ã–µ -->
            <section class="orders-section">
                <header class="orders-section-header">
                    <h3 class="orders-section-title">–í –æ–±—Ä–∞–±–æ—Ç–∫–µ</h3>
                    <span class="orders-section-counter" id="orders-active-count">0</span>
                </header>

                <div class="orders-list" id="orders-active-list"></div>

                <p class="orders-empty" id="orders-active-empty" style="display: none;">
                    –ê–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–∫–∞–∑—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç.
                </p>
            </section>

            <!-- –û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ -->
            <section class="orders-section">
                <header class="orders-section-header">
                    <h3 class="orders-section-title">–û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ</h3>
                    <span class="orders-section-counter" id="orders-processed-count">0</span>
                </header>

                <div class="orders-list" id="orders-processed-list"></div>

                <p class="orders-empty" id="orders-processed-empty" style="display: none;">
                    –û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –∑–∞–∫–∞–∑—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç.
                </p>
            </section>
        </div>
    </div>
    <div id="order-detail-page" style="display:none;">
        <div class="order-detail">
            <header class="order-detail-header">
                <div class="order-detail-id-row">
                    <h2 class="order-detail-title">
                        –ó–∞–∫–∞–∑ ‚Ññ<span id="order-detail-id"></span>
                    </h2>
                    <span id="order-detail-status"
                          class="order-detail-status">
                    <!-- —Ç–µ–∫—Å—Ç —Å—Ç–∞—Ç—É—Å–∞ JS -->
                </span>
                </div>
                <p class="order-detail-date" id="order-detail-date">
                    <!-- –¥–∞—Ç–∞/–≤—Ä–µ–º—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è -->
                </p>
            </header>

            <!-- –¢–æ–≤–∞—Ä—ã -->
            <section class="order-detail-section">
                <h3 class="order-detail-section-title">–¢–æ–≤–∞—Ä—ã</h3>
                <div class="order-items" id="order-items-list"></div>
            </section>
            <section class="order-detail-section">
                <h3 class="order-detail-section-title">–ö–æ–Ω—Ç–∞–∫—Ç—ã</h3>
                <p class="order-detail-text">
                    –¢–µ–ª–µ—Ñ–æ–Ω: <span id="order-contact-phone"></span>
                </p>
                <p class="order-detail-text">
                    Email: <span id="order-contact-email"></span>
                </p>
            </section>
            <!-- –î–æ—Å—Ç–∞–≤–∫–∞ -->
            <section class="order-detail-section">
                <h3 class="order-detail-section-title">–î–æ—Å—Ç–∞–≤–∫–∞</h3>
                <p class="order-detail-text" id="order-delivery-summary"></p>
            </section>

            <!-- –û–ø–ª–∞—Ç–∞ -->
            <section class="order-detail-section">
                <h3 class="order-detail-section-title">–û–ø–ª–∞—Ç–∞</h3>
                <p class="order-detail-text" id="order-payment-method"></p>
            </section>

            <!-- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π -->
            <section class="order-detail-section">
                <h3 class="order-detail-section-title">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</h3>
                <p class="order-detail-text" id="order-comment-text"></p>
            </section>

            <!-- –ò—Ç–æ–≥–∏ -->
            <section class="order-detail-section order-detail-summary">
                <div class="order-summary-row">
                    <span>–¢–æ–≤–∞—Ä—ã</span>
                    <span id="order-subtotal"></span>
                </div>
                <div class="order-summary-row">
                    <span>–î–æ—Å—Ç–∞–≤–∫–∞</span>
                    <span id="order-delivery-price"></span>
                </div>
                <div class="order-summary-row order-summary-row-total">
                    <span>–ò—Ç–æ–≥–æ</span>
                    <span id="order-total"></span>
                </div>
            </section>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<!-- Optional delivery service widgets -->
<script src="https://cdn.jsdelivr.net/npm/@cdek-it/widget@3" charset="utf-8"></script>
<script async src="https://ndd-widget.landpro.site/widget.js"></script>
{% endblock %}