{% extends "base.html" %}

{% block title %}ElixirPeptides - Checkout{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ request.url_for('static', path='css/toolbar.css') }}">
<link rel="stylesheet" href="{{ request.url_for('static', path='css/search.css') }}">
<link rel="stylesheet" href="{{ request.url_for('static', path='css/products.css') }}">
<link rel="stylesheet" href="{{ request.url_for('static', path='css/cart-page.css') }}">
<link rel="stylesheet" href="{{ request.url_for('static', path='css/checkout.css') }}">
{% endblock %}

{% block content %}
<!-- Search overlay -->
<div class="search-overlay" id="search-overlay">
    <div class="search-header">
        <input type="text" id="search-input" placeholder="–ü–æ–∏—Å–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤...">
        <button id="close-search">‚úï</button>
    </div>
    <ul id="history-list"></ul>
</div>

<!-- Toolbar -->
<div class="toolbar">
    <button class="toolbar-btn" id="sort-btn">Sort</button>
    <button class="toolbar-btn" id="filter-btn">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</button>
</div>

<div id="app">

    <!-- Product list view -->
    <div id="product-list" class="product-grid"></div>

    <!-- Product detail view -->
    <div id="product-detail" style="display:none;"></div>

    <!-- üõí Cart page view -->
    <div id="cart-page" style="display:none;">
        <h3 id="cart-title">–ö–æ—Ä–∑–∏–Ω–∞</h3>
        <div id="cart-items"></div>

        <div id="cart-summary">
            <p class="total-label" id="summary-label">
                <span class="total-label">–ò—Ç–æ–≥–æ:</span>
                <span class="total-amount">0 ‚ÇΩ</span>
            </p>
            <div class="promo">
                <label for="promo">–ü—Ä–æ–º–æ-–∫–æ–¥</label>
                <input type="text" id="promo" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ-–∫–æ–¥">
            </div>
        </div>
    </div>

    <!-- ‚úÖ Checkout page view -->
    <div id="checkout-page">
        <h3>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h3>

        <div id="checkout-summary"></div>
        <button id="proceed-payment-btn">–ü–µ—Ä–µ–π—Ç–∏ –∫ –æ–ø–ª–∞—Ç–µ</button>
    </div>

    <!-- Hidden contact form page -->
    <div id="contact-page" style="display:none;max-width:900px;margin:0 auto;padding:1rem;">
        <h2>–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —á–µ–∫–∞</h2>
        <form id="contact-form" onsubmit="return false;" novalidate>
            <input type="text" name="name" placeholder="–ò–º—è" required>
            <input type="text" name="surname" placeholder="–§–∞–º–∏–ª–∏—è" required>
            <input type="tel" name="phone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω" required>
            <input type="email" name="email" placeholder="Email" required>
            <button id="submit-contact" type="button">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
        </form>
    </div>

</div>
{% endblock %}

{% block extra_js %}
<!-- –ú–æ–¥—É–ª–∏ SPA -->
<script type="module" src="{{ request.url_for('static', path='js/cart-page.js') }}"></script>
<script type="module" src="{{ request.url_for('static', path='js/checkout.js') }}"></script>

<!-- CDEK Widget 3.x -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@cdek-it/widget@3" charset="utf-8"></script>
<script async src="https://ndd-widget.landpro.site/widget.js"></script>

{% endblock %}